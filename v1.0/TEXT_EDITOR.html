<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TEXT EDITOR</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: Arial, sans-serif;
      background: #fff;
      overflow: hidden; /* Hide both axes by default */
    }

    /* If you later want to allow vertical scroll: 
       just switch to overflow-y: auto; 
       and add scrollbar hiding below. */
       
    /* Optional scrollbar hiding (browser-compatible) */
    ::-webkit-scrollbar {
      width: 0px;
      background: transparent;
    }

    * {
      box-sizing: border-box;
    }

    h1 {
      color: #007bff;
      margin: 0 0;
    }

    .textArea {
      overflow: auto;
      resize: none;
      width: 60vw;
      max-width: 800px;
      height: 50vh;
      margin: 10px;
      padding: 5vw;
      font-size: large;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      background-color: #f9f9f9;
      border: 10px solid #555;
      border-radius: 20px;
      text-align: left;
      color: black;
      justify-self: center;
      align-self: center;
    }

    .wholeContainer {
      text-align: left;
      justify-self: center;
      align-self: center;
      margin: 0;
      padding: 0;
    }

    .headingContainer {
      text-align: left;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
      margin: 0;
    }

    .class {
      width: 7vw;
      height: 4vh;
      text-align: center;
      background-color: black;
      color: #f9f9f9;
    }

    .textNavBtns {
      width: 7vw;
      height: 4vh;
      text-align: center;
      background-color: black;
      color: #f9f9f9;
      font-size: x-small;
    }

    .formatBtns {
      margin-top: 1%;
      margin-bottom: 1%;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
      border-style: solid;
      background-color: #007bff;
      padding: 1%;
    }

    .formatTab {
      border-style: solid;
      margin-top: 5px;
      background-color: #007bff;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
    }

    #counterBox {
      text-align: left;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
    }

    #wordCounter {
      width: 20vw;
      align-items: baseline;
      margin-top: 5%;
      background-color: #007bff;
      color: black;
      text-align: center;
      margin-right: 1vw;
    }

    #charCounter {
      width: 20vw;
      align-items: baseline;
      margin-top: 5%;
      background-color: #007bff;
      color: black;
      text-align: center;
      margin-left: 1vw;
    }

    #charCounter::placeholder {
      font-size: xx-small;
    }

    .textNavBar {
      margin: 2%;
      background-color: #007bff;
      border-style: solid;
      padding: 1%;
      text-align: left;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
    }

    .colorAndSizeBar {
      position: absolute;
      top: 55%;
      right: 0px;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 30px;
      z-index: 9999;
      padding: 0px;
    }

    .colorAndSizeBar input[type="range"],
    .colorAndSizeBar input[type="color"] {
      writing-mode: vertical-lr;
      width: 20px;
      height: 4%px;
      cursor: pointer;
      border: none;
      outline: none;
    }

    #colorPicker {
      border-radius: 50%;
      width: 20px;
      height: 20px;
      border-style: none;
      margin: 0 0;
      position: sticky;
    }

    #fontSizeSelector {
      transform: rotate(180deg);
    }

    #floatCopy {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 9999;
  padding: 10px 15px;
  font-size: 15px;
  border-radius: 50%;
  background-color: #4caf50;
  color: white;
  border: none;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

  </style>
</head>

<body>

  <div class="wholeContainer">
    <div class="headingContainer">
      <h1>TEXT EDITOR</h1>
    </div>
  </div>

  <div class="formatTab">Format Tab</div>
  <div class="formatBtns">
    <button type="button" onclick="formatTextGeneric('b')" class="class"><b>A</b></button>
    <button type="button" onclick="formatTextGeneric('i')" class="class"><i>A</i></button>
    <button type="button" onclick="formatTextGeneric('code')" class="class"><code>A</code></button>
    <button type="button" onclick="formatTextGeneric('u')" class="class"><u>A</u></button>
    <button type="button" onclick="formatTextGeneric('sup')" class="class"><span class="sup-fake">A</span></button>
    <button type="button" onclick="formatTextGeneric('sub')" class="class"><sub>A</sub></button>
    <button type="button" onclick="formatTextGeneric('s')" class="class"><s>A</s></button>
    <button type="button" onclick="formatTextGeneric('mark')" class="class"><mark>A</mark></button>
  </div>

  <div contenteditable="True" class="textArea"></div>

  <div class="textNavBar">
    <button class="textNavBtns" type="button" onclick="aFunction()">‚û°Ô∏è</button>
    <button class="textNavBtns" type="button" onclick="bFunction()">‚¨ÖÔ∏è</button>
    <button class="textNavBtns" type="button" onclick="cFunction()">‚¨ÜÔ∏è</button>
    <button class="textNavBtns" type="button" onclick="dFunction()">‚¨áÔ∏è</button>
    <button type="button" onclick="lb()" class="textNavBtns">‚Ü©Ô∏è</button>
    <button type="button" onclick="backSpaceFun()" class="textNavBtns">‚å´</button>
    <button type="button" onclick="clearFormatting()" class="textNavBtns">‚úñÔ∏è</button>
    <button type="button" onclick="clearEverything()" class="textNavBtns">‚ùå</button>
  </div>

  <div class="textNavBar">
    <select title="Select the font family for the text..." id="fontFamily" class="textNavBar">
      <option value="inherit">Default</option>
      <option value="Arial">Arial</option>
      <option value="Helvetica">Helvetica</option>
      <option value="Courier New">Courier New</option>
      <option value="Georgia">Georgia</option>
      <option value="Times New Roman">Times New Roman</option>
      <option value="Verdana">Verdana</option>
      <option value="Trebuchet MS">Trebuchet MS</option>
      <option value="Lucida Console">Lucida Console</option>
      <option value="monospace">Monospace</option>
      <option value="Comic Sans MS">Comic Sans MS</option>
      <option value="fantasy">Fantasy</option>
      <option value="cursive">Cursive</option>
      <option value="gill-sans">Gill-sans</option>
    </select>
  </div>

  <div id="counterBox">
    <input id="wordCounter" placeholder="WORDS HERE " disabled />
    <input id="charCounter" placeholder=" CHARCATERS  HERE" disabled />
  </div>

  <div class="colorAndSizeBar">
    <input type="color" class="colSize" placeholder="Color" id="colorPicker" />
    <input type="range" class="colSize" placeholder="Font Size" min="8" max="72" value="16" step="1" id="fontSizeSelector" />
  </div>

 <button type="button" id="floatCopy" onclick="downloadAsHTML()">üíæ</button>



 <script>


const editor = document.querySelector('.textArea');

const wordOutput = document.getElementById('wordCounter');

const charOutput = document.getElementById('charCounter');

editor.addEventListener('input', () => {
  const text = editor.innerText.trim();
  wordOutput.value = text === "" ? 0 : text.split(/\s+/).length;
  charOutput.value = text.length;
});


function downloadAsHTML() { //this function is made by chatGPT
  const content = document.querySelector(".textArea").innerHTML;
  const fullHTML = `
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Downloaded Content</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          padding: 20px;
        }
      </style>
    </head>
    <body>${content}</body>
    </html>
  `;

  const blob = new Blob([fullHTML], { type: "text/html" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "new.html";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}



function clearEverything() {
  if (confirm("Clear all text? This cannot be undone.")) {
    const editor = document.querySelector(".textArea");

    // Clear all text and reset styles
    editor.innerHTML = "";
    editor.style.fontFamily = `-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif`;
    editor.style.color = "black";
    editor.style.fontSize = "large";
    editor.style.textAlign = "left";

    // Clear word/char counters
    document.getElementById('wordCounter').value = '';
    document.getElementById('charCounter').value = '';

    // Reset UI controls
    document.getElementById("fontSizeSelector").value = 16;
    document.getElementById("colorPicker").value = "#000000";
    document.getElementById("fontFamily").value = "inherit";
  }
}

document.getElementById("colorPicker").addEventListener("input", function () {
  const clr = this.value;
  const ed = document.querySelector(".textArea");
  const sel = window.getSelection();
  ed.focus();

  if (sel.rangeCount > 0 && !sel.isCollapsed) {
    const rng = sel.getRangeAt(0);
    const frag = rng.extractContents();

    const sp = document.createElement("span");
    sp.style.color = clr;
    sp.appendChild(frag);

    rng.insertNode(sp);
    sel.removeAllRanges();
  } else {
     ed.querySelectorAll('[style]').forEach(el => {
    el.style.removeProperty("color");
    if (el.getAttribute("style")?.trim() === "") el.removeAttribute("style");
  });

  // Wrap entire content in a new span with selected color
  const span = document.createElement("span");
  span.style.color = clr;
  span.innerHTML = ed.innerHTML;
  ed.innerHTML = "";
  ed.appendChild(span);
  ed.focus();
  }
});

document.getElementById("fontSizeSelector").addEventListener("input", function () {
  const clr = this.value + "px";
  const ed = document.querySelector(".textArea");
  const sel = window.getSelection();
  ed.focus();

  if (sel.rangeCount > 0 && !sel.isCollapsed) {
    const rng = sel.getRangeAt(0);
    const frag = rng.extractContents();

    const sp = document.createElement("span");
    sp.style.fontSize = clr;
    sp.appendChild(frag);

    rng.insertNode(sp);
    sel.removeAllRanges();
  } else {
    ed.querySelectorAll('[style]').forEach(el => {
    el.style.removeProperty("font-size");
    if (el.getAttribute("style")?.trim() === "") el.removeAttribute("style");
  });

  const span = document.createElement("span");
  span.style.fontSize = clr;
  span.innerHTML = ed.innerHTML;
  ed.innerHTML = "";
  ed.appendChild(span);
  ed.focus();
  }
});

document.getElementById("fontFamily").addEventListener("change", function () {
  const fam = this.value;
  const ed = document.querySelector(".textArea");
  const sel = window.getSelection();
  ed.focus();

  if (sel.rangeCount > 0 && !sel.isCollapsed) {
    const rng = sel.getRangeAt(0);
    const frag = rng.extractContents();

    const sp = document.createElement("span");
    sp.style.fontFamily = fam;
    sp.appendChild(frag);

    rng.insertNode(sp);
    sel.removeAllRanges();
  } else {
    ed.querySelectorAll('[style]').forEach(el => {
    el.style.removeProperty("font-family");
    if (el.getAttribute("style")?.trim() === "") el.removeAttribute("style");
  });

  // Wrap entire content in a new span with selected font family
  const span = document.createElement("span");
  span.style.fontFamily = fam;
  span.innerHTML = ed.innerHTML;
  ed.innerHTML = "";
  ed.appendChild(span);
  ed.focus();
  }
});


function clearFormatting() {
  const editor = document.querySelector('.textArea');

  // Reset editor's own font family
  editor.style.fontFamily = `-apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif`;

  // Remove formatting tags
  editor.innerHTML = editor.innerHTML
    .replace(/<(\/)?(b|i|u|s|code|mark|sup|sub|span)>/gi, '');

  // Remove inline styles from all child elements
  editor.style.color = "black" ;
  editor.style.fontSize = "large" ;
   editor.style.textAlign = "left" ;
  editor.querySelectorAll('[style]').forEach(el => el.removeAttribute('style'));
  document.getElementById("fontSizeSelector").value = 16;
  document.getElementById("colorPicker").value = "#000000";
  document.getElementById("fontFamily").value = "inherit";



}

function lb() {
  const selection = window.getSelection();
  if (!selection.rangeCount) return;

  const range = selection.getRangeAt(0);

  // Only insert if selection is inside the editor
  if (!editor.contains(range.commonAncestorContainer)) return;

  range.deleteContents();
  const br = document.createElement("br");
  range.insertNode(br);

  // Move cursor after the br
  range.setStartAfter(br);
  range.collapse(true);
  selection.removeAllRanges();
  selection.addRange(range);
}

function formatTextGeneric(tagName) {
  const editor = document.querySelector(".textArea");
  const selection = window.getSelection();
  editor.focus();

  if (selection.rangeCount > 0 && !selection.isCollapsed) {
    const range = selection.getRangeAt(0);
    const selectedText = range.extractContents();

    // Remove existing formatting if any
    const cleanedText = document.createElement("span");
    cleanedText.innerHTML = selectedText.textContent;

    const el = document.createElement(tagName);
    el.textContent = cleanedText.textContent;

    range.insertNode(el);
    selection.removeAllRanges();
  } else {
  const tag = document.createElement(tagName);
  tag.innerHTML = editor.innerHTML;
  editor.innerHTML = "";
  editor.appendChild(tag);
}

  }
function backSpaceFun() {
  const selection = window.getSelection();
  if (!selection.rangeCount) return;

  const range = selection.getRangeAt(0);
  const editorArea = document.querySelector('.editor-area');

  // Ensure the selection is inside the editor
  let node = range.startContainer;
  while (node && node !== editorArea) node = node.parentNode;
  if (node !== editorArea) return; // not in editor

  if (!range.collapsed) {
    // If some text is selected, delete it
    range.deleteContents();
    selection.removeAllRanges();
    selection.addRange(range);
  } else {
    // No selection, delete character before cursor
    const pos = range.startOffset;
    const container = range.startContainer;

    if (container.nodeType === Node.TEXT_NODE) {
      if (pos > 0) {
        // Delete character in text node
        container.deleteData(pos - 1, 1);
        range.setStart(container, pos - 1);
        range.collapse(true);
        selection.removeAllRanges();
        selection.addRange(range);
      } else {
        // Cursor at start of text node, try merge with previous node
        const prev = container.previousSibling;
        if (prev && prev.nodeType === Node.TEXT_NODE) {
          const len = prev.length;
          prev.deleteData(len - 1, 1);
          range.setStart(prev, len - 1);
          range.collapse(true);
          selection.removeAllRanges();
          selection.addRange(range);
        }
      }
    } else if (container.nodeType === Node.ELEMENT_NODE && pos > 0) {
      // If inside an element, remove previous child
      const prevNode = container.childNodes[pos - 1];
      if (prevNode) container.removeChild(prevNode);
    }
  }
}


function aFunction() {
  document.querySelector(".textArea").style.textAlign = "right"; // ‚û°Ô∏è
}

function bFunction() {
  document.querySelector(".textArea").style.textAlign = "left"; // ‚¨ÖÔ∏è
}

function cFunction() {
  document.querySelector(".textArea").style.textAlign = "center"; // ‚¨ÜÔ∏è
}

function dFunction() {
  document.querySelector(".textArea").style.textAlign = "justify"; // ‚¨áÔ∏è
}



</script>


</body>
</html>
